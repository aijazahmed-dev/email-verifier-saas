<h2>Email Verification Tool</h2>
<p>Plan: {{ request.user.userplan.plan.name }}<p>
<p>Remaining Credits: {{ request.user.userplan.credits_remaining }}<p>
{% if request.user.userplan.plan.is_monthly %}
    <p>Daily usage: {{ request.user.userplan.daily_used }}/{{ request.user.userplan.plan.daily_limit }} credits</p>
{% endif %}

<form method="post">
    {% csrf_token %}
    <textarea name="emails" rows="5" placeholder="Enter one or more emails, separated by comma, space, or new line">{{ emails_input }}</textarea>
    <br>
    <button type="submit">Verify</button>
</form>

{% if results %}
    <h3>Verification Results:</h3>
    <table border="1" cellpadding="5">
        <tr>
            <th>Email</th>
            <th>Syntax Valid</th>
            <th>Has MX</th>
            <th>Disposable</th>
            <th>Role Account</th>
            <th>Can Receive Email</th>
        </tr>
        {% for r in page_obj %}
        <tr>
            <td>{{ r.email }}</td>
            <td>{{ r.syntax_valid }}</td>
            <td>{{ r.has_mx }}</td>
            <td>{{ r.is_disposable }}</td>
            <td>{{ r.is_role }}</td>
            <td>{{ r.deliverable }}</td>
        </tr>
        {% endfor %}
    </table>
{% endif %}

<!-- Pagination controls -->
<div class="pagination">
  {% if page_obj.has_previous %}
    <a href="?page={{ page_obj.previous_page_number }}">Previous</a>
  {% endif %}

  <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>

  {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}">Next</a>
  {% endif %}
</div>

